
Runner.buttonEvents["Confirmar_Cambio_Contrasena"]=function(pageObj,proxy,pageid){pageObj.buttonNames[pageObj.buttonNames.length]='Confirmar_Cambio_Contrasena';if(!pageObj.buttonEventBefore['Confirmar_Cambio_Contrasena']){pageObj.buttonEventBefore['Confirmar_Cambio_Contrasena']=function(params,ctrl,pageObj,proxy,pageid,rowData,row,submit){var ajax=ctrl;var currentUrl=window.location.href;var url=new URL(currentUrl);var token=url.searchParams.get("token");var oldpassword=$('#password').val();var newpassword=$('#newpassword').val();var confirmnewpass=$('#confirmnewpass').val();params["confirmnewpass"]=confirmnewpass;params["password"]=oldpassword;params["newpassword"]=newpassword;var password=document.getElementById("newpassword").value;var regex=/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?/~\\/-]).{8,}$/;var passwordAlert=document.getElementById("password-alert");var passwordAlertnull=document.getElementById("password-alert-null");var passwordAlertconfirmarpass=document.getElementById("password-alert-confirmar");var Alertconfirmarpassnewpass=document.getElementById("confirm-password-alert");if(oldpassword!=''&&oldpassword==newpassword){Alertconfirmarpassnewpass.style.display="block";return false;}else{Alertconfirmarpassnewpass.style.display="none";}
if(newpassword==confirmnewpass){passwordAlertconfirmarpass.style.display="block";}else{passwordAlertconfirmarpass.style.display="none";}
if(regex.test(password)){passwordAlert.style.display="none";}else{passwordAlert.style.display="block";return false;}}}
if(!pageObj.buttonEventAfter['Confirmar_Cambio_Contrasena']){pageObj.buttonEventAfter['Confirmar_Cambio_Contrasena']=function(result,ctrl,pageObj,proxy,pageid,rowData,row,params){var ajax=ctrl;var confirmpasswordAlert=document.getElementById("password-alert_pass");var passwordAlertconfirmarpass=document.getElementById("password-alert-confirmar");if(result["txt"]=='vedadero'){confirmpasswordAlert.style.display="none";}
if(result["txt"]=='falso'){confirmpasswordAlert.style.display="block";}
if(result["diferente"]=='verdadero'){passwordAlertconfirmarpass.style.display="block";}
if(result["diferente"]=='falso'){passwordAlertconfirmarpass.style.display="none";}
if(result["cambioExitoso"]=='hecho'){pageObj.toggleItem("oldpass_label",false);pageObj.toggleItem("newpass_label",false);pageObj.toggleItem("confirm_label",false);pageObj.toggleItem("snippet_oldpass",false);pageObj.toggleItem("snippet_newpass",false);pageObj.toggleItem("snippet_confirmpass",false);pageObj.toggleItem("custom_confirmar_button",false);swal("Confirmación Exitosa","Su contraseña ha sido cambiada!","success");pageObj.toggleItem("text",false);pageObj.toggleItem("ConfirmarCambio",true);}}}
$('a[id="Confirmar_Cambio_Contrasena"]').each(function(){if($(this).closest('.gridRowAdd').length){return;}
this.id="Confirmar_Cambio_Contrasena"+"_"+Runner.genId();var button_Confirmar_Cambio_Contrasena=new Runner.form.Button({id:this.id,btnName:"Confirmar_Cambio_Contrasena"});button_Confirmar_Cambio_Contrasena.init({args:[pageObj,proxy,pageid]});});};